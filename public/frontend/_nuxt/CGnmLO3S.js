import{d as z,$ as w,a0 as B,z as v,g as D,X as f,c as d,v as r,a as s,b as _,t as C,w as P,e as A,o as u,f as M,C as b,u as T,m as R}from"./3_Zv-WpX.js";import{a as V,b as E}from"./Q1YwpnRf.js";import{_ as G}from"./CT0eMlgd.js";import{u as N}from"./CsdPt_ke.js";import"./CBD6NunU.js";import"./CqkleIqs.js";import"./C5M3fG0v.js";import"./C1Zb41gg.js";import"./CiW8w7fU.js";import"./Bs3-i8Y-.js";import"./DvFEMNoi.js";import"./DIGpuFmm.js";import"./CWHvRTZ_.js";const Y={key:0,class:"container py-5"},L={key:1,class:"container py-5"},U={class:"text-center"},q={class:"text-muted"},H={class:"mt-3 text-small text-muted"},K={key:2},X={key:3,class:"container py-5"},j={class:"text-center"},J=z({__name:"[id]",async setup(O){let p,y;const k=w(),h=B(),i=v(()=>Number(k.params.id)),{data:a,pending:S,error:c}=([p,y]=D(async()=>N(`product-${i.value}`,async()=>{try{return(await b.getProduct(i.value,"TRY")).data}catch{console.warn("Single product API failed, falling back to products list");const o=(await b.getProducts({per_page:100})).data.find(n=>n.id===i.value);if(!o)throw new Error(`Product with ID ${i.value} not found`);return o}},{key:`product-${i.value}`,server:!1,default:()=>null,transform:t=>t||null})),p=await p,y(),p),l=v(()=>{var e,o,n,m;if(!a.value)return null;const t=a.value;return{id:t.id,title:t.name,description:t.description,sku:t.sku,price:t.price.original,status:t.in_stock?"in-stock":"out-of-stock",parent:((o=(e=t.categories)==null?void 0:e[0])==null?void 0:o.name)||"Genel",category:{name:((m=(n=t.categories)==null?void 0:n[0])==null?void 0:m.name)||"Genel"},reviews:[],discount:0,imageURLs:x(t.variants),sizes:F(t.variants),variants:t.variants||[],img:g(t.images),slug:t.name.toLowerCase().replace(/\s+/g,"-"),unit:"adet",children:"",quantity:1,brand:{name:t.brand||""},productType:"",additionalInformation:[],sellCount:0,featured:!1,tags:[],offerDate:void 0,videoId:void 0}});function x(t){if(!t||t.length===0)return[];const e=new Map;return t.forEach(o=>{var n;o.color&&!e.has(o.color)&&e.set(o.color,{color:{name:o.color,clrCode:I(o.color)},img:g((n=a.value)==null?void 0:n.images)})}),Array.from(e.values())}function F(t){if(!t||t.length===0)return[];const e=new Set;return t.forEach(o=>{o.size&&e.add(o.size)}),Array.from(e).sort()}function g(t){var o;if(!t||t.length===0)return"";const e=t.find(n=>n.is_primary);return(e==null?void 0:e.image_url)||((o=t[0])==null?void 0:o.image_url)||""}function I(t){return{Siyah:"#000000",Gri:"#808080",Beyaz:"#FFFFFF",Mavi:"#0066CC",Kırmızı:"#CC0000",Yeşil:"#006600",Sarı:"#FFCC00",Turuncu:"#FF6600",Mor:"#6600CC",Pembe:"#FF69B4"}[t]||"#CCCCCC"}return f(l,t=>{t&&T({title:`${t.title} | Shofy`,description:t.description.substring(0,160),ogTitle:`${t.title} | Shofy`,ogDescription:t.description.substring(0,160),ogImage:t.img,ogType:"product"})},{immediate:!0}),f(a,t=>{var e;if(t&&((e=t.images)==null?void 0:e.length)>0){const o=g(t.images);o&&(h.activeImg=o)}},{immediate:!0}),f(c,t=>{t&&console.error("Product loading error:",t)}),f([i,c],([t,e])=>{console.log("Product ID:",t),e&&console.error("Product Error:",e.message||"Unknown error")}),(t,e)=>{const o=A,n=V,m=G,$=E;return u(),d("div",null,[r(S)?(u(),d("div",Y,e[1]||(e[1]=[s("div",{class:"text-center"},[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Yükleniyor...")]),s("p",{class:"mt-3"},"Ürün bilgileri yükleniyor...")],-1)]))):r(c)&&!r(a)?(u(),d("div",L,[s("div",U,[e[3]||(e[3]=s("h2",null,"Ürün Bulunamadı",-1)),s("p",q,"Aradığınız ürün mevcut değil (ID: "+C(r(i))+") veya kaldırılmış olabilir.",1),_(o,{href:"/shop",class:"btn btn-primary"},{default:P(()=>e[2]||(e[2]=[M("Ürünleri Gör",-1)])),_:1,__:[2]}),s("div",H," Hata detayı: "+C(r(c).message||r(c)),1)])])):r(a)&&r(l)?(u(),d("div",K,[_(n,{product:r(l)},null,8,["product"]),_(m,{product:r(l)},null,8,["product"]),_($,{"product-id":r(a).id,category:r(l).category.name},null,8,["product-id","category"])])):(u(),d("div",X,[s("div",j,[e[4]||(e[4]=s("h3",null,"Bir sorun oluştu",-1)),e[5]||(e[5]=s("p",null,"Sayfa yükleniyor...",-1)),s("button",{onClick:e[0]||(e[0]=Q=>t.$router.go(0)),class:"btn btn-secondary"},"Sayfayı Yenile")])]))])}}}),ut=R(J,[["__scopeId","data-v-0bd50935"]]);export{ut as default};
