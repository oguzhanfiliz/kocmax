{"version":3,"file":"auth-kArSvnCq.js","sources":["../../../../middleware/auth.ts"],"sourcesContent":["import { useAuthStore } from '@/pinia/useAuthStore';\r\n\r\nexport default defineNuxtRouteMiddleware(async (to) => {\r\n  const authStore = useAuthStore();\r\n  \r\n  // If user is not authenticated, redirect to login\r\n  if (!authStore.isAuthenticated) {\r\n    return navigateTo({\r\n      path: '/giris',\r\n      query: { redirect: to.fullPath }\r\n    });\r\n  }\r\n  \r\n  // If token is expired, try to refresh\r\n  if (authStore.isTokenExpired && authStore.refreshToken) {\r\n    const success = await authStore.refreshAuthToken();\r\n    if (!success) {\r\n      return navigateTo({\r\n        path: '/giris',\r\n        query: { redirect: to.fullPath }\r\n      });\r\n    }\r\n  }\r\n});"],"names":["__executeAsync"],"mappings":";;;;;;;;;;;;;;;;;AAGE,MAAA,iCAA+B,OAAA,OAAA;AAAA,MAAA,QAAA;AAG/B,oBAAe,aAAA;AACb,MAAA,CAAA,UAAO,iBAAW;AAAA,WAChB,WAAM;AAAA,MACN,MAAA;AAAA,MACD,OAAA,EAAA,UAAA,GAAA,SAAA;AAAA,IAAA,CACH;AAAA,EAGA;AACE,MAAA,UAAM,kBAAA,UAAA,cAAA;AACN,UAAK,WAAS,CAAA,QAAA,SAAA,IAAAA,aAAA,MAAA,UAAA,iBAAA,CAAA,GAAA,SAAA,MAAA,QAAA,UAAA,GAAA;AACZ,QAAA,CAAA,SAAO;AAAW,aAChB,WAAM;AAAA,QACN,MAAA;AAAA,QACD,OAAA,EAAA,UAAA,GAAA,SAAA;AAAA,MAAA,CACH;AAAA,IACF;AAAA,EACF;;"}